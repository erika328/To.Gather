<div class="bg-cyan-100 text-gray-600">
<div class="container mx-auto flex justify-between items-center px-8 py-2 text-lg">
  <div class="space-x-3">
  <!-- アカウント設定 -->
  <button id="openUserSettingModalButton" class="rounded-lg drop-shadow-lg bg-yellow-100 hover:bg-yellow-300 hover:drop-shadow-none px-2 py-2">
      <i class="fa-solid fa-gear fa-xl"></i>
  </button>
  <!-- グループ選択 -->
  <div class="relative inline-block" id="calendar-select-wrapper">
    <button id="dropdown-button" class="rounded-lg drop-shadow-lg bg-yellow-100 hover:drop-shadow-none px-2.5 py-2">
      <i class="fa-regular fa-calendar-check fa-xl"></i>
    </button>
      <ul id="dropdown-calendar" class="hidden absolute z-50 left-0 mt-0 p-2 w-48 px-2 py-6 bg-yellow-100 space-y-5 border rounded-r-lg shadow-lg">
        <li class="border-b-2 border-white pb-5 mx-2">グループを選ぶ</li>
        <% if @user_groups.present? %>
          <% @user_groups.each do |group| %>
            <li>
              <%= link_to group.title, group_events_path(group), class: "ml-2 hover:text-white transition-all duration-300" %>
            </li>
          <% end %>
        <% end %>
        <li>
          <%= link_to "グループを作る", new_group_path, class: "ml-2 hover:text-white transition-all duration-300" %>
        </li>
      </ul>
  </div>
  <div class="relative inline-block">
    <%= current_user.name %>
  </div>

  </div>
  <div>
    <ul>
    <!-- ハンバーガーメニュー -->
     <li class="relative" id="hamburger-wrapper">
       <i class="fa-solid fa-bars fa-xl cursor-pointer" id="hamburger-icon"></i>
        <ul class="hidden absolute right-0 mt-0 p-2 w-48 px-2 z-50 py-6 bg-yellow-100 space-y-5 border rounded-l-lg shadow-lg" id="menu-list">
          <li class="border-b-2 border-white pb-5 mx-2">Menu</li>
          <li><%= link_to 'マイカレンダー', '#', class: "ml-2 hover:text-white transition-all duration-300"%></li>
          <li><%= link_to 'カレンダー作成', '#', class: "ml-2 hover:text-white transition-all duration-300"%></li>
          <li><%= link_to 'ログアウト', destroy_user_session_path ,class: "ml-2 hover:text-white transition-all duration-300" %></li>
        </ul>
      </li>
    </ul>
  </div>
</div>
</div>

<script>
document.addEventListener('click', (e) => {
  if(!hamburgerIcon.contains(e.target) && menuList.classList.contains('hidden')) {
    menuList.classList.add('hidden');
  }

  if(!dropdownButton.contains(e.target) && calendarMenu.classList.contains('hidden')){
     calendarMenu.classList.add('hidden'); 
  }
})

hamburgerIcon.addEventListener('click', () => {
  menuList.classList.toggle('hidden'); 
})

dropdownButton.addEventListener('click', () => {
  calendarMenu.classList.toggle('hidden');
})
</script>